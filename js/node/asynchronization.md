# Asynchronization of node

## 难点

### 异常处理
**异步IO的实现主要分为两节阶段：提交请求和处理结果。这两个阶段中间是有其他时间循环的调度，两者彼此不关联。**  
异步方法通常在第一阶段提交请求后就会立即返回一个结果，但是真正的处理和结果返回在另一个阶段，这也是异常发生的地方。  
**try/catch只能捕获档次循环内的异常，当callback执行时抛出的异常无法捕捉。**

一般约定在回调函数callback中将第一个参数设err，如果err不为空，说明发生了异常。

### 函数嵌套过深

## 解决方案
### 事件发布/订阅模式
通过events模块中的信号来处理，提交异步处理时订阅相关信号，当处理完成时，处理模块发射相应信号。这样在之后的循环中，就会触发该信号的回调。


### promise